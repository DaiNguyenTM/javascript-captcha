{"version":3,"file":"captcha.js","names":["_helpers","_interopRequireDefault","require","_invalidCaptchaSettingsException","_captchaTagNotFoundException","_jsCaptchaIntegrationCore","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_toPropertyKey","key","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","Number","pluginInfo","releaseNo","pluginId","Captcha","settings","sanitizeSettings","executeRequiredSettingsCheck","integrationCore","createJsCaptchaIntegrationCoreInstance","integrationType","_integrationCore","get","value","getCaptchaData","reloadCaptcha","displayCaptcha","captchaFormId","captchaTag","getCaptchaTag","CaptchaTagNotFoundException","getHtml","captchaHtml","innerHTML","errorMessage","exports","sanitized","helpers","sanitizer","sanitize","captchaEndpointUrl","languageTag","InvalidCaptchaSettingsException","tagSelectors","selector","element","document","querySelector","createCaptchaInstance","captcha","window"],"sources":["../../../src_temp/cjs_build_src/es6/captcha.js"],"sourcesContent":["/*\nCopyright Captcha, Inc. 2004-2023. All rights reserved.\n\nBotDetect, BotDetect CAPTCHA, Lanap, Lanap CAPTCHA, Lanap BotDetect, \nLanap BotDetect CAPTCHA, Lanapsoft, Lanapsoft CAPTCHA, \nLanapsoft BotDetect, Lanapsoft BotDetect CAPTCHA, and Lanap Software \nare trademarks of Captcha, Inc. All other product, brand, and company \nnames are mentioned for identification purposes only and are trademarks \nor registered trademarks of their respective owners.\n\nCaptcha, Inc. - formerly: Lanapsoft, Inc. / Lanap, Inc.\n*/\n\n// BotDetect CAPTCHA JavaScript Plugin -- ES6\n\nimport helpers from './helpers';\nimport InvalidCaptchaSettingsException from './exceptions/invalid-captcha-settings-exception';\nimport CaptchaTagNotFoundException from './exceptions/captcha-tag-not-found-exception';\nimport { createJsCaptchaIntegrationCoreInstance } from './js-captcha-integration-core';\n\n/** plugin info */\nconst pluginInfo = {\n  releaseNo: '4.5.0-RC2',\n  pluginId: '204'\n};\n\n/** Captcha object */\nclass Captcha {\n\n  static get releaseNo() {\n    return pluginInfo.releaseNo;\n  }\n\n  constructor(settings) {\n    settings = sanitizeSettings(settings);\n\n    executeRequiredSettingsCheck(settings);\n\n    var integrationCore = createJsCaptchaIntegrationCoreInstance(settings);\n    integrationCore.integrationType = pluginInfo.pluginId;\n    this._integrationCore = integrationCore;\n  }\n\n  get integrationCore() {\n    return this._integrationCore;\n  }\n\n  get settings() {\n    return this.integrationCore.settings;\n  }\n\n  getCaptchaData() {\n    return this.integrationCore.getCaptchaData();\n  }\n\n  reloadCaptcha() {\n    this.integrationCore.reloadCaptcha();\n  }\n\n  displayCaptcha() {\n    const captchaFormId = this.integrationCore.captchaFormId;\n    const captchaTag = getCaptchaTag(captchaFormId);\n\n    if (!captchaTag) {\n      throw new CaptchaTagNotFoundException(captchaFormId);\n    }\n\n    this.integrationCore.getHtml(\n      function(captchaHtml) {\n        captchaTag.innerHTML = captchaHtml;\n      },\n      function(errorMessage) {\n        captchaTag.innerHTML = errorMessage;\n      }\n    );\n  }\n}\n\n// private functions\n\nfunction sanitizeSettings(settings) {\n  let sanitized = {};\n  for (let key in settings) {\n    const value = settings[key];\n    sanitized[key] = helpers.sanitizer.sanitize(value);\n  }\n  return sanitized;\n}\n\nfunction executeRequiredSettingsCheck(settings) {\n  if (!(settings.captchaFormId && settings.captchaEndpointUrl && settings.languageTag)) {\n    throw new InvalidCaptchaSettingsException();\n  }\n}\n\nfunction getCaptchaTag(captchaFormId) {\n  const tagSelectors = [\n    '[captchaformid=\"' + captchaFormId + '\"]',\n    '[captchaFormId=\"' + captchaFormId + '\"]',\n    '[captcha-form-id=\"' + captchaFormId + '\"]',\n    '[data-captchaformid=\"' + captchaFormId + '\"]',\n    '[data-captchaFormId=\"' + captchaFormId + '\"]',\n    '[data-captcha-form-id=\"' + captchaFormId + '\"]',\n  ];\n  let captchaTag = null;\n  for (let i = 0; i < tagSelectors.length; i++) {\n    const selector = tagSelectors[i];\n    const element = document.querySelector(selector);\n    if (element) {\n      captchaTag = element;\n      break;\n    }\n  }\n  return captchaTag;\n}\n\nfunction createCaptchaInstance(settings) {\n  const captcha = new Captcha(settings);\n  return captcha;\n}\n\n(function(window) {\n  window.Captcha = Captcha;\n  window.createCaptchaInstance = createCaptchaInstance;\n})(window);\n\nexport { \n  Captcha, \n  createCaptchaInstance \n};\n"],"mappings":"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"}